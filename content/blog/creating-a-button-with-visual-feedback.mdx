---
title: Creating a Button in React with Visual Feedback
tagline: 'With a loading, completed and error state'
date: '2020-07-07'
featured: true
draft: true
path: '/blog/post/creating-a-button-with-visual-feedback'
category: 'Front-end Development'
featuredImage: images/visual-feedback-button.jpg
tags: [UX Design, Users, Visual Feedback, How-to]
layout: full
heroColor: '#083059'
---
import { CodeHighlight } from '../../src/components/CodeHighlight';
import { Link } from 'gatsby';
import { Button, ButtonTest } from './DemoComponents/FeedbackButton';

# Creating a button that gives user visual feedback

If you have not <Link to="/blog/post/importance-of-visual-feedback">read my article about the importance and how to give users visual feedback</Link> that is a good place to start to learn about why giving users visually feedback is important. 

I am going to show you how to create a button that gives visual feedback to a user using **React**. 

## Packages we will be using

* Styled Components 
* Typescript
* Font Awesome
    * @fortawesome/fontawesome-svg-core
    * @fortawesome/free-brands-svg-icons
    * @fortawesome/free-regular-svg-icons
    * @fortawesome/free-solid-svg-icons
    * @fortawesome/react-fontawesome
* Polished

##  Creating the basic component 

The code below will create a basic button that allows you to pass any text as a child of the component.
 
```tsx render=true
import React, { ReactNode } from 'react';
import styled from 'styled-components';

interface SBProps {
  isLoading?: boolean;
  completed?: boolean;
  failed?: boolean;
}

const StyledButton = styled.button<SBProps>``;

interface Props {
  children: ReactNode;
}

const Button = ({ children, {...rest} }: Props) => {
  return <StyledButton {...rest}>{children}</StyledButton>;
};

export default Button;
```
At this point you will have a simple button that is not styled.
## Adding styles to the button 

Next we will be adding the basic styles to the component using Styled Components.
```tsx render=true
import React, { ReactNode } from 'react';
import styled from 'styled-components';
import { darken } from 'polished';

interface SBProps {
  isLoading?: boolean;
  completed?: boolean;
  failed?: boolean;
  disabled?: boolean;
}

const StyledButton = styled.button<SBProps>`
    border-radius: 25px;
    border: none;
    font-size: 1rem;
    height: 36px;
    cursor: pointer;
    transition: all 0.2s ease;

    &:hover:not([disabled]) {
        background-color: ${darken(0.1, '#a8d3ea')};
    }

    &[disabled] {
        background-color: #d9d9d9;
        color: #404040;
        cursor: not-allowed;
    }

    ${({ completed, failed, isLoading }) =>
        !completed &&
        !failed &&
        !isLoading &&
    css`
        background-color: #a8d3ea;
        color: #004970;
        padding: 0 40px;
    `}
`;

interface Props {
  children: ReactNode;
  disabled?: boolean;
  isLoading?: boolean;
  completed?: boolean;
  failed?: boolean;
}

const Button = ({
  children,
  disabled,
  isLoading,
  completed,
  failed,
  ...rest
}: Props) => {
  return <StyledButton disabled={disabled} {...rest}>{children}</StyledButton>;
};

export default Button;
```

At this point you should have a button that looks like the one below.  Go ahead and give it a press.

```tsx render=true
<Button onClick={() => alert('Hey you clicked me')}>Button</Button>
```
<Button onClick={() => alert('Hey you clicked me')}>Button</Button>

Next we will be adding a loading state to the button.

## Adding a loading state to the button

To add the loading state to the button we make use of the isLoading property to add a loading icon and hide the text.

We also pass the isLoading property to the disabled attribute of the button so the button will be disabled when it is loading to prevent secondary clicks.

The isLoading property is also sent to the the StyledButton component so that we can change the styles when the button is in its loading state.

```tsx render=true
import React, { ReactNode } from 'react';
import styled from 'styled-components';
import { darken } from 'polished';
import { FontAwesomeIcon } from '@fortawesome/react-fontawesome';
import { faSpinner } from '@fortawesome/free-solid-svg-icons';

interface SBProps {
  isLoading?: boolean;
  completed?: boolean;
  failed?: boolean;
  disabled?: boolean;
}

const StyledButton = styled.button<SBProps>`
    border-radius: 25px;
    border: none;
    font-size: 1rem;
    height: 36px;
    cursor: pointer;
    transition: all 0.2s ease;

    &:hover:not([disabled]) {
        background-color: ${darken(0.1, '#a8d3ea')};
    }

    &[disabled] {
        background-color: #d9d9d9;
        color: #404040;
        cursor: not-allowed;
    }

    ${({ completed, failed, isLoading }) =>
        !completed &&
        !failed &&
        !isLoading &&
        css`
            background-color: #a8d3ea;
            color: #004970;
            padding: 0 40px;
        `}

     ${({ isLoading }) =>
        isLoading &&
        css`
            width: 36px;
        `}
`;

interface Props {
  children: ReactNode;
  disabled?: boolean;
  isLoading?: boolean;
  completed?: boolean;
  failed?: boolean;
}

const Button = ({
  children,
  disabled,
  isLoading,
  completed,
  failed,
  ...rest
}: Props) => {
  return ( 
    <StyledButton
      isLoading={isLoading}
      disabled={isLoading || disabled}
      {...rest}
    >
      {isLoading ? <FontAwesomeIcon spin icon={faSpinner} /> : children}
    </StyledButton>
    );
};

export default Button;

```

We added the Font Awesome icon of faSpinner and set it to spin so that the icon spins in the button.

Now if you pass the **isLoading** property to the component you should see the button below.

```tsx render=true
<Button isLoading>Button</Button>
```

<Button isLoading>Button</Button>

The spinner lets the user knows that something is happening after the pressed the button.

## Added a completed state to the button

To add an completed state we will be making used of the completed property of the button.

```tsx render=true
import React, { ReactNode } from 'react';
import styled from 'styled-components';
import { darken } from 'polished';
import { FontAwesomeIcon } from '@fortawesome/react-fontawesome';
import { faSpinner, faCheck } from '@fortawesome/free-solid-svg-icons';

interface SBProps {
  isLoading?: boolean;
  completed?: boolean;
  failed?: boolean;
  disabled?: boolean;
}

const StyledButton = styled.button<SBProps>`
    border-radius: 25px;
    border: none;
    font-size: 1rem;
    height: 36px;
    cursor: pointer;
    transition: all 0.2s ease;
    
    &:hover:not([disabled]) {
        background-color: ${darken(0.1, '#a8d3ea')};
    }

    &[disabled] {
        background-color: #d9d9d9;
        color: #404040;
        cursor: not-allowed;
    }

    ${({ completed, failed, isLoading }) =>
        !completed &&
        !failed &&
        !isLoading &&
        css`
            background-color: #a8d3ea;
            color: #004970;
            padding: 0 40px;
        `}

     ${({ isLoading }) =>
        isLoading &&
        css`
            width: 36px;
        `}

    ${({ completed }) =>
        completed &&
        css`
        &[disabled] {
            background-color: #4de783;
            color: #08571f;
            width: 36px;
        }
    `}
`;

interface Props {
  children: ReactNode;
  disabled?: boolean;
  isLoading?: boolean;
  completed?: boolean;
  failed?: boolean;
}

const Button = ({
  children,
  disabled,
  isLoading,
  completed,
  failed,
  ...rest
}: Props) => {
let icon = faSpinner;
  if (completed) {
    icon = faCheck;
  }
  return ( 
    <StyledButton
      isLoading={isLoading}
      disabled={isLoading || completed || disabled}
      {...rest}
    >
        {isLoading || completed ? (
            <FontAwesomeIcon spin={isLoading ? true : false} icon={icon} />
        ) : (
            children
        )}
    </StyledButton>
    );
};

export default Button;

```

If you now pass the completed property to the component it should look like the button below. 

At this point if you use the following code in one of your react pages then it will display as the button bellow.

```tsx render=true
<Button completed>Button</Button>
```

<Button completed>Button</Button>

 At this point the button is still disabled as to prevent additional clicks.

 ## Adding a failed state to the Button
 
 The next step would be to add a failed state to the button this is done by making use of a failed property.

 The first step would be to import the faTimes icon from `@fortawesome/free-solid-svg-icons`. 

 Then you would add an additional if statement to check if the button should be in its failed state, which will set `icon` to be `faTimes`. 

The button should still be disabled when it has failed so we add the `failed` property to the disabled attribute of the `<StyledButton>` component.

You will also need to add the styles for the failed state of the button to styles of `<StyledButton>`.

You will also need to check if the button has failed when we check if we should show the icon or not.

```tsx render=true
import React, { ReactNode } from 'react';
import styled from 'styled-components';
import { darken } from 'polished';
import { FontAwesomeIcon } from '@fortawesome/react-fontawesome';
// import faTimes here
import { faSpinner, faCheck, faTimes } from '@fortawesome/free-solid-svg-icons';

interface SBProps {
  isLoading?: boolean;
  completed?: boolean;
  failed?: boolean;
  disabled?: boolean;
}

const StyledButton = styled.button<SBProps>`
    border-radius: 25px;
    border: none;
    font-size: 1rem;
    height: 36px;
    cursor: pointer;
    transition: all 0.2s ease;
    
    &:hover:not([disabled]) {
        background-color: ${darken(0.1, '#a8d3ea')};
    }

    &[disabled] {
        background-color: #d9d9d9;
        color: #404040;
        cursor: not-allowed;
    }

    ${({ completed, failed, isLoading }) =>
        !completed &&
        !failed &&
        !isLoading &&
        css`
            background-color: #a8d3ea;
            color: #004970;
            padding: 0 40px;
        `}

     ${({ isLoading }) =>
        isLoading &&
        css`
            width: 36px;
        `}

    ${({ completed }) =>
        completed &&
        css`
        &[disabled] {
            background-color: #4de783;
            color: #08571f;
            width: 36px;
        }
    `}
  
    // Add this
    ${({ failed }) =>
        failed &&
        css`
        &[disabled] {
            background-color: #ff5959;
            color: #5b0006;
            width: 36px;
        }
    `}
`;

interface Props {
  children: ReactNode;
  disabled?: boolean;
  isLoading?: boolean;
  completed?: boolean;
  failed?: boolean;
}

const Button = ({
  children,
  disabled,
  isLoading,
  completed,
  failed,
  ...rest
}: Props) => {
let icon = faSpinner;
  if (completed) {
    icon = faCheck;
  }
  // Add this
  if(failed) {
    icon = faTimes;
  }
  return ( 
    <StyledButton
      isLoading={isLoading}
      // Add failed here
      disabled={isLoading || completed || failed || disabled}
      {...rest}
    >
        // Add failed here
        {isLoading || completed || failed ? (
            <FontAwesomeIcon spin={isLoading ? true : false} icon={icon} />
        ) : (
            children
        )}
    </StyledButton>
    );
};

export default Button;

```

At this point if you use the following code in one of your react pages then it will display as the button bellow.

```tsx render=true
<Button failed>Button</Button>
```

<Button failed>Button</Button>

That is all of the interactions taken  care of so the only thing left to show is how to user it another page.

## Using it

Below is example of how to use it on a react page. It this example I am just setting a timeOut to show how it would look it its different states.  In an actually application this would be defined by how long it takes for the action of the button to complete besides the how long the success or fail is shown for for that you could still use a timeOut function.

```tsx render=true 

import React, { useState } from 'react';
import Button from '../pathtobutton/Button.tsx'

export const ButtonTest = () => {
  const [loading, setLoading] = useState(false);
  const [loadingFailed, setLoadingFailed] = useState(false);

  const [completed, setCompleted] = useState(false);
  const [failed, setFailed] = useState(false);

  const handleClick = () => {
    setLoading(true);
    setTimeout(() => {
      setLoading(false);
      setCompleted(true);
    }, 1000);
    setTimeout(() => {
      setCompleted(false);
    }, 1500);
  };

  const handleClickFail = () => {
    setLoadingFailed(true);
    setTimeout(() => {
      setLoadingFailed(false);
      setFailed(true);
    }, 1000);
    setTimeout(() => {
      setFailed(false);
    }, 1500);
  };
  return (
    <>
      <Button
        isLoading={loading}
        completed={completed}
        onClick={() => handleClick()}
      >
        Button
      </Button>

      <p>Fail Example</p>

      <Button
        isLoading={loadingFailed}
        failed={failed}
        onClick={() => handleClickFail()}
      >
        I will fail
      </Button>
    </>
  );
};

export default Button;
```

<ButtonTest />
